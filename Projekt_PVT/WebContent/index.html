<!DOCTYPE html>
<html>
<head>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="https://code.highcharts.com"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>


<script>
	console.log("Börjar...");
	//var json = "http://rigel.hig.se:8080/Bulle/ServletTest?datasource=goals"; //Funkar inte!!
	var json = "http://localhost:8080/Proj/ServletTest?datasource=goals";
	
/*  	var jsonDates = [];
	var jsonData = [];
	
	var jqxhr = $.getJSON(json, function() {
		dataType: "json";
		console.log("success");
	}).done(function( data ) {
		var set = data.dataset;
		$.each(data, function(value) {
			console.log(set[1]);
		});
	}).fail(function() {
		console.log("error");
	}).always(function() {
		console.log("complete");
	}); */
	
	$(document).ready(function() {

	    var options = {
	        chart: {
	            renderTo: 'container',
	            type: 'scatter'
	        },
	       /*  xAxis: {
	        	type: 'datetime'
	        }, */
	        series: [{}]
	    };
	    
	    // http://stackoverflow.com/questions/3066586/get-string-in-yyyymmdd-format-from-js-date-object
	    Date.prototype.yyyymmdd = function() {
	    	   var yyyy = this.getFullYear().toString();
	    	   var mm = (this.getMonth()+1).toString(); // getMonth() is zero-based
	    	   var dd  = this.getDate().toString();
	    	   return yyyy + (mm[1]?mm:"0"+mm[0]) + (dd[1]?dd:"0"+dd[0]); // padding
	    	  };


	    //http://www.highcharts.com/docs/working-with-data/custom-preprocessing (längst ner)
	    $.getJSON(json, function(data) { 
	    	var set = data.dataset; // sparar arrayen av arrayer i variabel
	/*     	$.each(set, function(whatisthisvariable, value) { // försöker på nåt sätt parsa varje datum i arrayerna
				value[0] = new Date().yyyymmdd();
	    	}); */
	        options.series[0].data = set;
	        var chart = new Highcharts.Chart(options);
	        console.log("gjort chart");
	    });
	});

	
</script>
</head>
<body>

	<div id="container"
		style="min-width: 310px; height: 400px; margin: 0 auto"></div>

	<p>If you click on me, I will disappear.</p>
	<p>Click me away!</p>
	<p>Click me too!</p>

</body>
</html>
